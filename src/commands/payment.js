const a25_0x2e254d=a25_0x5dee;(function(_0x5d9cee,_0x5339e3){const _0x32d9a9=a25_0x5dee,_0x5c6dee=_0x5d9cee();while(!![]){try{const _0x1c14a2=parseInt(_0x32d9a9(0x235))/0x1+-parseInt(_0x32d9a9(0x253))/0x2+parseInt(_0x32d9a9(0x229))/0x3+parseInt(_0x32d9a9(0x212))/0x4*(parseInt(_0x32d9a9(0x1d8))/0x5)+parseInt(_0x32d9a9(0x247))/0x6+-parseInt(_0x32d9a9(0x1f6))/0x7+parseInt(_0x32d9a9(0x20f))/0x8*(-parseInt(_0x32d9a9(0x22c))/0x9);if(_0x1c14a2===_0x5339e3)break;else _0x5c6dee['push'](_0x5c6dee['shift']());}catch(_0x1fa6e4){_0x5c6dee['push'](_0x5c6dee['shift']());}}}(a25_0x4086,0xa0c73));const {Lipana}=require(a25_0x2e254d(0x1e4));let lipana=null,botSocket=null;const ADMIN_NUMBERS=[a25_0x2e254d(0x210),a25_0x2e254d(0x224)];function setBotSocket(_0xf894c6){botSocket=_0xf894c6;}function initLipana(){const _0x44dea9=a25_0x2e254d,_0x4e1be1={'LuTPj':function(_0x4bca97){return _0x4bca97();},'VEKMf':function(_0x2521ca,_0x1a5da0){return _0x2521ca!==_0x1a5da0;},'BnPMd':_0x44dea9(0x22b),'fXfbB':function(_0x243aa9,_0x1917c7){return _0x243aa9===_0x1917c7;},'jRVor':_0x44dea9(0x25a),'fikqh':_0x44dea9(0x1ed),'rPrhr':function(_0x5f2155,_0x59aee3){return _0x5f2155!==_0x59aee3;},'LTuzp':_0x44dea9(0x24b),'zHjGr':_0x44dea9(0x1d7),'zOtku':'(((.+)+)+)+$','BuWPN':function(_0xbbb79d,_0x1e4b73,_0x5e7ae4){return _0xbbb79d(_0x1e4b73,_0x5e7ae4);},'LNuaE':function(_0x1f539e,_0x45fa96){return _0x1f539e===_0x45fa96;},'BNMoW':'sandbox'},_0x34e75d=(function(){const _0x13a61e=_0x44dea9;if(_0x4e1be1['rPrhr'](_0x4e1be1['LTuzp'],_0x4e1be1[_0x13a61e(0x226)])){let _0x492f3c=!![];return function(_0x23b7f3,_0x51492b){const _0x5f39d0=_0x13a61e,_0x46c03f={'JrGGP':function(_0x3d0c45){const _0x2c73f2=a25_0x5dee;return _0x4e1be1[_0x2c73f2(0x214)](_0x3d0c45);},'pMhfZ':_0x5f39d0(0x1e6),'aziPs':function(_0x1e0a38,_0x4b39e6){const _0x3897f6=_0x5f39d0;return _0x4e1be1[_0x3897f6(0x234)](_0x1e0a38,_0x4b39e6);},'qGzUh':_0x4e1be1['BnPMd']};if(_0x4e1be1[_0x5f39d0(0x230)](_0x4e1be1[_0x5f39d0(0x217)],_0x4e1be1[_0x5f39d0(0x24a)]))_0x2fcf98=_0x46c03f[_0x5f39d0(0x22e)](_0x512f9b);else{const _0x435407=_0x492f3c?function(){const _0x4f6769=_0x5f39d0,_0x7d653a={'yHTON':_0x46c03f[_0x4f6769(0x23e)]};if(_0x46c03f[_0x4f6769(0x204)](_0x46c03f[_0x4f6769(0x1ff)],_0x46c03f[_0x4f6769(0x1ff)])){_0x3e6c62[_0x4f6769(0x257)](_0x7d653a[_0x4f6769(0x1ef)]);return;}else{if(_0x51492b){const _0x6e16b7=_0x51492b['apply'](_0x23b7f3,arguments);return _0x51492b=null,_0x6e16b7;}}}:function(){};return _0x492f3c=![],_0x435407;}};}else{if(_0x3a260b){const _0x5cf4a5=_0x49e95d[_0x13a61e(0x1d2)](_0x57f2e3,arguments);return _0x163018=null,_0x5cf4a5;}}}()),_0x56b44a=_0x4e1be1['BuWPN'](_0x34e75d,this,function(){const _0x1c6f2f=_0x44dea9;return _0x56b44a[_0x1c6f2f(0x254)]()[_0x1c6f2f(0x213)](_0x4e1be1[_0x1c6f2f(0x1f5)])[_0x1c6f2f(0x254)]()[_0x1c6f2f(0x207)](_0x56b44a)[_0x1c6f2f(0x213)](_0x4e1be1[_0x1c6f2f(0x1f5)]);});_0x4e1be1[_0x44dea9(0x214)](_0x56b44a);if(!process[_0x44dea9(0x1ca)]['LIPANA_SECRET_KEY'])return console['warn'](_0x44dea9(0x1c7)),null;const _0x16e6ca=_0x4e1be1[_0x44dea9(0x222)](process['env'][_0x44dea9(0x1f7)],_0x4e1be1[_0x44dea9(0x23a)])?_0x4e1be1['BNMoW']:_0x44dea9(0x21b);return console['log'](_0x44dea9(0x1eb)+_0x16e6ca+_0x44dea9(0x237)),new Lipana({'apiKey':process[_0x44dea9(0x1ca)][_0x44dea9(0x26f)],'environment':_0x16e6ca});}lipana=initLipana();const pendingPayments=new Map();async function initiateSTKPush(_0x5f38af,_0x2f174e,_0x369de0,_0x5a4971=null,_0x49edcc=null){const _0x12111f=a25_0x2e254d,_0x976bdf={'UeCzC':_0x12111f(0x238),'KFpbh':_0x12111f(0x1fa),'VXHAx':function(_0x320aa6,_0x3c8fc3){return _0x320aa6+_0x3c8fc3;},'FcBha':_0x12111f(0x1d9),'wuhbs':_0x12111f(0x242),'OHOGt':function(_0x19bddb,_0x377912){return _0x19bddb!==_0x377912;},'MsyXM':_0x12111f(0x267),'oBqua':function(_0x425808){return _0x425808();},'vCZgJ':function(_0x23b1ca,_0x35a73c){return _0x23b1ca===_0x35a73c;},'bcDUy':'WvUNg','ArezZ':_0x12111f(0x1c9),'bVGks':function(_0x4edfa1,_0x5baabb){return _0x4edfa1+_0x5baabb;},'PLIoO':_0x12111f(0x206),'mzsqL':'Payment\x20initiation\x20failed'};!lipana&&(_0x976bdf[_0x12111f(0x239)](_0x12111f(0x1cc),_0x976bdf['MsyXM'])?lipana=_0x976bdf[_0x12111f(0x263)](initLipana):(_0x31162e[_0x12111f(0x257)](_0x976bdf[_0x12111f(0x1c2)],_0x445a49),_0x45e3c4[_0x12111f(0x236)](_0x976bdf['KFpbh'])));if(!lipana){if(_0x976bdf['vCZgJ'](_0x976bdf[_0x12111f(0x264)],_0x12111f(0x220)))_0x1f04b5=_0x976bdf['VXHAx'](_0x976bdf[_0x12111f(0x256)],_0x123450['substring'](0x1));else throw new Error(_0x976bdf[_0x12111f(0x20b)]);}let _0x360f65=_0x5f38af[_0x12111f(0x254)]()[_0x12111f(0x225)](/\s+/g,'')[_0x12111f(0x225)](/[^0-9]/g,'');if(_0x360f65[_0x12111f(0x249)]('0'))_0x12111f(0x1ee)!=='fncDL'?_0x334bc4[_0x12111f(0x240)](_0x976bdf['wuhbs']):_0x360f65=_0x976bdf[_0x12111f(0x21a)](_0x976bdf[_0x12111f(0x256)],_0x360f65[_0x12111f(0x209)](0x1));else!_0x360f65[_0x12111f(0x249)]('254')&&(_0x360f65=_0x976bdf[_0x12111f(0x21a)](_0x976bdf[_0x12111f(0x256)],_0x360f65));const _0x22c919=process['env'][_0x12111f(0x1e1)];!_0x22c919&&console[_0x12111f(0x240)](_0x976bdf[_0x12111f(0x1fd)]);try{const _0x426854=await lipana[_0x12111f(0x1cb)]['initiateStkPush']({'phone':_0x360f65,'amount':Number(_0x2f174e),'callbackUrl':_0x22c919}),_0x44ccac=_0x426854[_0x12111f(0x262)]||_0x426854[_0x12111f(0x20c)]||_0x426854[_0x12111f(0x24f)];return pendingPayments[_0x12111f(0x1dc)](_0x44ccac,{'orderId':_0x369de0,'phone':_0x360f65,'amount':_0x2f174e,'status':'pending','timestamp':Date[_0x12111f(0x270)](),'customerJid':_0x5a4971,..._0x49edcc&&{'platform':_0x49edcc[_0x12111f(0x231)],'service':_0x49edcc['service'],'qty':_0x49edcc['qty'],'link':_0x49edcc[_0x12111f(0x25c)]}}),{'success':!![],'reference':_0x44ccac,'message':_0x12111f(0x23c)};}catch(_0x5c4f92){return console[_0x12111f(0x257)](_0x976bdf[_0x12111f(0x223)],_0x5c4f92),{'success':![],'error':_0x5c4f92[_0x12111f(0x23f)]||_0x976bdf[_0x12111f(0x1d3)]};}}function getPendingPayment(_0x1ba555){const _0x4f3923=a25_0x2e254d;return pendingPayments[_0x4f3923(0x22d)](_0x1ba555);}async function updatePaymentStatus(_0x1ee47f,_0x160cba,_0x524f5c={}){const _0x59c1fe=a25_0x2e254d,_0x50f30d={'LxGYl':_0x59c1fe(0x23d),'kEniA':function(_0x434231,_0x14cc25){return _0x434231===_0x14cc25;},'nKsKf':function(_0xb77821,_0x36afa4){return _0xb77821===_0x36afa4;},'Fygim':'completed','PTrUP':function(_0x50fc6e,_0x50a767,_0x522d07,_0x4bbf3d){return _0x50fc6e(_0x50a767,_0x522d07,_0x4bbf3d);}},_0x3e65ff=pendingPayments['get'](_0x1ee47f);if(_0x3e65ff){const _0x586a3b=_0x50f30d[_0x59c1fe(0x1ce)]['split']('|');let _0x58f0bb=0x0;while(!![]){switch(_0x586a3b[_0x58f0bb++]){case'0':_0x3e65ff[_0x59c1fe(0x252)]=_0x160cba;continue;case'1':pendingPayments['set'](_0x1ee47f,_0x3e65ff);continue;case'2':_0x3e65ff['completedAt']=Date[_0x59c1fe(0x270)]();continue;case'3':(_0x50f30d['kEniA'](_0x160cba,_0x59c1fe(0x1f9))||_0x50f30d[_0x59c1fe(0x25b)](_0x160cba,_0x50f30d[_0x59c1fe(0x20a)]))&&await _0x50f30d[_0x59c1fe(0x26d)](sendPaymentVerificationToAdmin,_0x3e65ff,_0x1ee47f,_0x524f5c);continue;case'4':_0x3e65ff[_0x59c1fe(0x1f1)]=_0x524f5c;continue;}break;}}}async function sendPaymentVerificationToAdmin(_0x9d4472,_0x3a3842,_0x3953dc){const _0x5d44dd=a25_0x2e254d,_0x553a30={'LYCdg':_0x5d44dd(0x243),'seTsy':'Error\x20sending\x20payment\x20verification\x20to\x20admin:','wfPQz':_0x5d44dd(0x1e2),'SfTnZ':_0x5d44dd(0x1e6),'cyOKq':_0x5d44dd(0x1de),'PjCWY':function(_0x1c931b,_0x374537){return _0x1c931b===_0x374537;},'sfKun':_0x5d44dd(0x1f9),'MsgOS':_0x5d44dd(0x219),'jCjFE':_0x5d44dd(0x1f8),'esNif':_0x5d44dd(0x250),'wuvfo':function(_0x855b34,_0x317014){return _0x855b34===_0x317014;},'dyzqg':_0x5d44dd(0x1c1),'wFOTT':_0x5d44dd(0x244),'MpDlh':_0x5d44dd(0x201),'LAmIG':function(_0x422a98,_0x4cfd97){return _0x422a98===_0x4cfd97;},'ciUoP':'zauLO','hnfun':function(_0x374d9b,_0x5f2258){return _0x374d9b!==_0x5f2258;},'yNDfV':'gvUyj','NyqXl':function(_0x2b6707,_0x26656d,_0xbd9dd7,_0x20abef){return _0x2b6707(_0x26656d,_0xbd9dd7,_0x20abef);}};if(!botSocket){if(_0x5d44dd(0x1e2)!==_0x553a30[_0x5d44dd(0x271)])throw new _0xa82a2d(_0x553a30['LYCdg']);else{console[_0x5d44dd(0x257)](_0x553a30[_0x5d44dd(0x251)]);return;}}const _0x42f4f0=new Date()[_0x5d44dd(0x260)](_0x5d44dd(0x26c),{'timeZone':_0x553a30[_0x5d44dd(0x1e3)]}),_0x1ce998=_0x553a30['PjCWY'](_0x9d4472[_0x5d44dd(0x252)],_0x553a30['sfKun'])||_0x553a30[_0x5d44dd(0x20d)](_0x9d4472[_0x5d44dd(0x252)],_0x553a30['MsgOS'])?_0x553a30['jCjFE']:_0x553a30[_0x5d44dd(0x215)],_0x36aa32=_0x553a30['PjCWY'](_0x9d4472[_0x5d44dd(0x252)],_0x5d44dd(0x1f9))||_0x553a30[_0x5d44dd(0x20d)](_0x9d4472[_0x5d44dd(0x252)],_0x553a30[_0x5d44dd(0x21e)])?'âœ…':'âŒ',_0x42ace4=_0x36aa32+_0x5d44dd(0x1fe)+(_0x9d4472[_0x5d44dd(0x241)]||_0x5d44dd(0x265))+_0x5d44dd(0x1d0)+_0x3a3842+_0x5d44dd(0x245)+_0x42f4f0+_0x5d44dd(0x1f2)+_0x9d4472[_0x5d44dd(0x1c8)]+_0x5d44dd(0x1e0)+_0x9d4472[_0x5d44dd(0x1ec)]+_0x5d44dd(0x1dd)+_0x1ce998+'\x0aâ”œâ”€\x20Payment\x20Status:\x20'+(_0x9d4472[_0x5d44dd(0x252)]===_0x553a30[_0x5d44dd(0x211)]||_0x553a30[_0x5d44dd(0x23b)](_0x9d4472['status'],_0x5d44dd(0x219))?_0x553a30[_0x5d44dd(0x1be)]:_0x553a30['wFOTT'])+'\x0a\x0a'+(_0x3953dc[_0x5d44dd(0x24f)]?_0x5d44dd(0x21d)+_0x3953dc[_0x5d44dd(0x24f)]+'\x0a':'')+(_0x3953dc['mpesaRef']?_0x5d44dd(0x25f)+_0x3953dc[_0x5d44dd(0x221)]+'\x0a':'')+(_0x9d4472['platform']?_0x5d44dd(0x1e5)+_0x9d4472['platform']+_0x5d44dd(0x205)+_0x9d4472[_0x5d44dd(0x1cf)]+'\x20'+_0x9d4472[_0x5d44dd(0x1ea)]+_0x5d44dd(0x22a)+_0x9d4472['link']+'\x0a':'')+_0x5d44dd(0x203)+(_0x553a30[_0x5d44dd(0x23b)](_0x9d4472[_0x5d44dd(0x252)],_0x553a30[_0x5d44dd(0x211)])||_0x9d4472[_0x5d44dd(0x252)]===_0x553a30[_0x5d44dd(0x21e)]?_0x553a30[_0x5d44dd(0x22f)]:'âš ï¸\x20*ACTION:\x20Payment\x20failed\x20-\x20contact\x20customer\x20for\x20resolution*')+_0x5d44dd(0x232);try{if(_0x553a30[_0x5d44dd(0x1e9)](_0x553a30[_0x5d44dd(0x1df)],'VqyqE'))_0x5aa86c[_0x5d44dd(0x257)](_0x553a30['seTsy'],_0x2f4a47);else{for(const _0x572115 of ADMIN_NUMBERS){await botSocket['sendMessage'](_0x572115,{'text':_0x42ace4}),console[_0x5d44dd(0x236)](_0x5d44dd(0x218)+_0x572115);}(_0x553a30[_0x5d44dd(0x20d)](_0x9d4472['status'],_0x553a30[_0x5d44dd(0x211)])||_0x9d4472[_0x5d44dd(0x252)]===_0x553a30[_0x5d44dd(0x21e)])&&(_0x553a30['hnfun'](_0x553a30[_0x5d44dd(0x1e8)],_0x553a30[_0x5d44dd(0x1e8)])?_0x31bbdf=_0x595b45:await _0x553a30[_0x5d44dd(0x1d4)](sendCustomerReceipt,_0x9d4472,_0x3a3842,_0x3953dc));}}catch(_0x3593cf){console[_0x5d44dd(0x257)](_0x553a30[_0x5d44dd(0x268)],_0x3593cf);}}async function sendCustomerReceipt(_0x2e94a5,_0x232ac6,_0x5ddcf2){const _0x1d66f5=a25_0x2e254d,_0x1c0402={'HbTJV':function(_0x1f12be,_0xff12ed){return _0x1f12be*_0xff12ed;},'rYHHJ':function(_0x29505f,_0x210f1a){return _0x29505f*_0x210f1a;},'UXIyK':function(_0x36d9a9,_0x344630){return _0x36d9a9-_0x344630;},'xdmaV':_0x1d66f5(0x1bf),'cbYjR':'(((.+)+)+)+$','hAtmr':function(_0x3ce0d4,_0xdd51c2){return _0x3ce0d4===_0xdd51c2;},'ApgHU':_0x1d66f5(0x25d),'TPBBT':_0x1d66f5(0x1cd),'ILfvV':'Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','LiDCk':_0x1d66f5(0x26c),'KlBGh':_0x1d66f5(0x1de),'xlJZW':'LpXAQ','McolQ':_0x1d66f5(0x1d6),'NSJQA':'NwuqE','CIaKk':_0x1d66f5(0x265),'NMDGD':_0x1d66f5(0x238)};if(!botSocket){if(_0x1c0402[_0x1d66f5(0x26b)](_0x1c0402[_0x1d66f5(0x202)],_0x1c0402[_0x1d66f5(0x1e7)])){const _0x41b58c=_0x3a616d[_0x1d66f5(0x270)](),_0x2274c7=_0x1c0402['HbTJV'](_0x1c0402[_0x1d66f5(0x25e)](0xa,0x3c),0x3e8);for(const [_0x2522a2,_0x37912e]of _0x30a2c2){_0x1c0402['UXIyK'](_0x41b58c,_0x37912e[_0x1d66f5(0x216)])>_0x2274c7&&_0x25ddf7['delete'](_0x2522a2);}}else{console[_0x1d66f5(0x257)](_0x1c0402[_0x1d66f5(0x1f3)]);return;}}const _0x388cdb=new Date()['toLocaleString'](_0x1c0402[_0x1d66f5(0x1c3)],{'timeZone':_0x1c0402[_0x1d66f5(0x228)]});let _0x7bea59=_0x2e94a5['customerJid'];if(!_0x7bea59&&_0x2e94a5[_0x1d66f5(0x1c8)]){if(_0x1c0402[_0x1d66f5(0x1f0)]===_0x1c0402[_0x1d66f5(0x259)]){_0x5bb3c8[_0x1d66f5(0x257)](_0x1c0402[_0x1d66f5(0x1fc)]);return;}else _0x7bea59=_0x2e94a5[_0x1d66f5(0x1c8)]+_0x1d66f5(0x246);}if(!_0x7bea59){if(_0x1c0402[_0x1d66f5(0x20e)]!==_0x1c0402[_0x1d66f5(0x20e)])return _0x4712ed[_0x1d66f5(0x254)]()[_0x1d66f5(0x213)](TGtMIB['cbYjR'])[_0x1d66f5(0x254)]()[_0x1d66f5(0x207)](_0x57d206)[_0x1d66f5(0x213)](TGtMIB[_0x1d66f5(0x208)]);else{console[_0x1d66f5(0x257)](_0x1c0402[_0x1d66f5(0x1fc)]);return;}}const _0x2d9d8f='âœ…\x20*PAYMENT\x20CONFIRMED\x20-\x20RECEIPT*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸŽ‰\x20*Your\x20payment\x20has\x20been\x20successfully\x20received!*\x0a\x0aðŸ“‹\x20*Receipt\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20'+(_0x2e94a5[_0x1d66f5(0x241)]||_0x1c0402[_0x1d66f5(0x1c0)])+_0x1d66f5(0x1db)+_0x232ac6+'\x0aâ”œâ”€\x20Date\x20&\x20Time:\x20'+_0x388cdb+_0x1d66f5(0x1fb)+_0x2e94a5[_0x1d66f5(0x1ec)]+_0x1d66f5(0x1d5)+_0x2e94a5[_0x1d66f5(0x1c8)]+'\x0a'+(_0x5ddcf2[_0x1d66f5(0x221)]?_0x1d66f5(0x1da)+_0x5ddcf2['mpesaRef']+'\x0a':'')+(_0x5ddcf2[_0x1d66f5(0x24f)]?_0x1d66f5(0x21d)+_0x5ddcf2['transactionId']+'\x0a':'')+_0x1d66f5(0x233);try{await botSocket[_0x1d66f5(0x1c6)](_0x7bea59,{'text':_0x2d9d8f}),console[_0x1d66f5(0x236)](_0x1d66f5(0x261)+_0x7bea59);}catch(_0x3ae474){console[_0x1d66f5(0x257)](_0x1c0402['NMDGD'],_0x3ae474),console[_0x1d66f5(0x236)](_0x1d66f5(0x1fa));}}function a25_0x4086(){const _0x5ab0f8=['xlJZW','paymentDetails','\x0a\x0aðŸ’³\x20*Payment\x20Information:*\x0aâ”œâ”€\x20Phone:\x20','ILfvV','COMPLETED','zOtku','6196092NRsIcT','LIPANA_ENV','âœ…\x20SUCCESS','success','Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID','\x0a\x0aðŸ’³\x20*Payment\x20Summary:*\x0aâ”œâ”€\x20Amount\x20Paid:\x20','xdmaV','wuhbs','\x20*PAYMENT\x20VERIFICATION*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸ“‹\x20*Transaction\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20','qGzUh','Cauxa','âš¡\x20*ACTION:\x20Payment\x20verified\x20-\x20proceed\x20with\x20service\x20delivery*','ApgHU','\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0a','aziPs','\x0aâ”œâ”€\x20Service:\x20','Lipana\x20STK\x20Push\x20Error:','constructor','cbYjR','substring','Fygim','ArezZ','checkoutRequestID','PjCWY','NSJQA','8UKINrp','254745282166@s.whatsapp.net','sfKun','4JBHKWF','search','LuTPj','esNif','timestamp','jRVor','âœ…\x20Payment\x20verification\x20sent\x20to\x20admin:\x20','completed','bVGks','production','failed','â”œâ”€\x20Transaction\x20ID:\x20','MsgOS','zvoPR','JTaDL','mpesaRef','LNuaE','PLIoO','254759424232@s.whatsapp.net','replace','zHjGr','receiptNumber','KlBGh','2726490MXyowv','\x0aâ”œâ”€\x20Link:\x20','jJAkb','5469489LEpWaR','get','JrGGP','MpDlh','fXfbB','platform','\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Payment\x20System','â”œâ”€\x20Status:\x20âœ…\x20CONFIRMED\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aâš¡\x20*What\x27s\x20Next?*\x0aYour\x20order\x20is\x20being\x20processed\x20and\x20will\x20be\x20delivered\x20within\x20a\x20few\x20minutes.\x0a\x0aðŸ“ž\x20*Need\x20Help?*\x0aContact\x20support:\x20254745282166\x20or\x20254759424232\x0a\x0aThank\x20you\x20for\x20your\x20business!\x20ðŸ™\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Bot','VEKMf','18001Vfqdax','log','\x20mode','Error\x20sending\x20receipt\x20to\x20customer:','OHOGt','BNMoW','wuvfo','STK\x20Push\x20sent\x20successfully','0|2|4|1|3','pMhfZ','message','warn','orderId','PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','Payment\x20system\x20not\x20configured','FALSE\x20âœ—','\x0aâ”œâ”€\x20Time:\x20','@s.whatsapp.net','1122288bOOLWW','query','startsWith','fikqh','WgoUT','CJpNF','exports','SUCCESS','transactionId','âŒ\x20FAILED','SfTnZ','status','526868qWckZM','toString','delete','FcBha','error','NBcZi','McolQ','RDyMq','nKsKf','link','hIbqz','rYHHJ','â”œâ”€\x20M-PESA\x20Ref:\x20','toLocaleString','âœ…\x20Receipt\x20sent\x20to\x20customer:\x20','workflowId','oBqua','bcDUy','N/A','KgfYr','zKrFW','seTsy','completedAt','bPJrB','hAtmr','en-KE','PTrUP','phLkD','LIPANA_SECRET_KEY','now','wfPQz','dyzqg','Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt','CIaKk','TRUE\x20âœ“','UeCzC','LiDCk','Payment\x20verification\x20error:','tHTya','sendMessage','LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work','phone','Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','env','transactions','vheOd','zckBn','LxGYl','qty','\x0aâ”œâ”€\x20Reference:\x20','roRcO','apply','mzsqL','NyqXl','/=\x20KES\x0aâ”œâ”€\x20Phone\x20Number:\x20','HECOk','knGoW','6504895YeGStG','254','â”œâ”€\x20M-PESA\x20Receipt:\x20','\x0aâ”œâ”€\x20Transaction\x20Ref:\x20','set','/=\x20KES\x0aâ”œâ”€\x20Status:\x20','Africa/Nairobi','ciUoP','\x0aâ”œâ”€\x20Amount:\x20','PAYMENT_CALLBACK_URL','GNPYQ','cyOKq','@lipana/sdk','\x0aðŸ“¦\x20*Service\x20Details:*\x0aâ”œâ”€\x20Platform:\x20','Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','TPBBT','yNDfV','LAmIG','service','Initializing\x20Lipana\x20in\x20','amount','eIKwu','fncDL','yHTON'];a25_0x4086=function(){return _0x5ab0f8;};return a25_0x4086();}async function verifyPayment(_0x2b5ad5){const _0x3be423=a25_0x2e254d,_0x5a2d1c={'roRcO':function(_0x1062ed){return _0x1062ed();},'bPJrB':_0x3be423(0x243),'phLkD':function(_0x530f09,_0x4cb88d){return _0x530f09===_0x4cb88d;},'KgfYr':_0x3be423(0x24e),'Cauxa':_0x3be423(0x1f4),'tHTya':_0x3be423(0x1f9),'NBcZi':function(_0x4c0a02,_0x5542fd,_0xf9d667,_0x8af989){return _0x4c0a02(_0x5542fd,_0xf9d667,_0x8af989);},'CJpNF':_0x3be423(0x21c),'zvoPR':_0x3be423(0x1c4)};!lipana&&(lipana=_0x5a2d1c[_0x3be423(0x1d1)](initLipana));if(!lipana)throw new Error(_0x5a2d1c[_0x3be423(0x26a)]);try{const _0x2b568a=await lipana['transactions'][_0x3be423(0x248)]({'reference':_0x2b5ad5}),_0x3dfab6={'transactionId':_0x2b568a[_0x3be423(0x24f)]||_0x2b568a['id'],'mpesaRef':_0x2b568a['mpesaReceiptNumber']||_0x2b568a[_0x3be423(0x227)],'amount':_0x2b568a[_0x3be423(0x1ec)],'status':_0x2b568a['status'],'completedAt':_0x2b568a[_0x3be423(0x269)]||new Date()['toISOString']()},_0x3aaaa0=_0x5a2d1c['phLkD'](_0x2b568a[_0x3be423(0x252)],_0x5a2d1c[_0x3be423(0x266)])||_0x5a2d1c[_0x3be423(0x26e)](_0x2b568a[_0x3be423(0x252)],_0x5a2d1c[_0x3be423(0x200)])||_0x5a2d1c[_0x3be423(0x26e)](_0x2b568a[_0x3be423(0x252)],_0x5a2d1c[_0x3be423(0x1c5)]);return await _0x5a2d1c[_0x3be423(0x258)](updatePaymentStatus,_0x2b5ad5,_0x3aaaa0?'success':_0x5a2d1c[_0x3be423(0x24c)],_0x3dfab6),{'success':_0x3aaaa0,'details':_0x3dfab6};}catch(_0x126782){return console[_0x3be423(0x257)](_0x5a2d1c[_0x3be423(0x21f)],_0x126782),{'success':![],'error':_0x126782[_0x3be423(0x23f)]};}}function clearExpiredPayments(){const _0x14da3c=a25_0x2e254d,_0x4aeeab={'ZfStX':function(_0x4bbbde,_0x4de54a){return _0x4bbbde-_0x4de54a;}},_0xa23f23=Date[_0x14da3c(0x270)](),_0x1920b1=0xa*0x3c*0x3e8;for(const [_0x594a22,_0x4fc796]of pendingPayments){_0x4aeeab['ZfStX'](_0xa23f23,_0x4fc796[_0x14da3c(0x216)])>_0x1920b1&&pendingPayments[_0x14da3c(0x255)](_0x594a22);}}function a25_0x5dee(_0x392008,_0x1749fd){_0x392008=_0x392008-0x1be;const _0x171e19=a25_0x4086();let _0x3d7751=_0x171e19[_0x392008];return _0x3d7751;}setInterval(clearExpiredPayments,0xea60),module[a25_0x2e254d(0x24d)]={'initiateSTKPush':initiateSTKPush,'getPendingPayment':getPendingPayment,'updatePaymentStatus':updatePaymentStatus,'verifyPayment':verifyPayment,'setBotSocket':setBotSocket,'pendingPayments':pendingPayments,'sendCustomerReceipt':sendCustomerReceipt};