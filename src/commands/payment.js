const a25_0x15407e=a25_0x4730;(function(_0x4e8b6d,_0x32ab8d){const _0x1aa4e2=a25_0x4730,_0x277f32=_0x4e8b6d();while(!![]){try{const _0x1c00b6=-parseInt(_0x1aa4e2(0x17a))/0x1*(parseInt(_0x1aa4e2(0x1ae))/0x2)+parseInt(_0x1aa4e2(0x1b8))/0x3*(-parseInt(_0x1aa4e2(0x168))/0x4)+parseInt(_0x1aa4e2(0x16b))/0x5+parseInt(_0x1aa4e2(0x1cf))/0x6+-parseInt(_0x1aa4e2(0x1bd))/0x7*(-parseInt(_0x1aa4e2(0x182))/0x8)+-parseInt(_0x1aa4e2(0x144))/0x9+-parseInt(_0x1aa4e2(0x16f))/0xa*(-parseInt(_0x1aa4e2(0x1d0))/0xb);if(_0x1c00b6===_0x32ab8d)break;else _0x277f32['push'](_0x277f32['shift']());}catch(_0x1c4fbd){_0x277f32['push'](_0x277f32['shift']());}}}(a25_0x5790,0x6b9d3));const {Lipana}=require(a25_0x15407e(0x1a0));let lipana=null,botSocket=null;const ADMIN_NUMBERS=[a25_0x15407e(0x18c),a25_0x15407e(0x16d)];function setBotSocket(_0x388654){botSocket=_0x388654;}function initLipana(){const _0x2e1d8e=a25_0x15407e,_0x5ce2a1={'NVOmO':_0x2e1d8e(0x139),'teMLs':_0x2e1d8e(0x12a),'tYfDy':function(_0x82d56a,_0x87cc2a){return _0x82d56a===_0x87cc2a;},'vQlFe':'tvtgd','oniam':'(((.+)+)+)+$','ZYhrS':function(_0x4e6728){return _0x4e6728();},'smaHY':_0x2e1d8e(0x1b6),'TbFpW':_0x2e1d8e(0x17e)},_0x26b815=(function(){const _0x50d92e=_0x2e1d8e,_0x3437be={'uzYpR':_0x5ce2a1[_0x50d92e(0x149)],'LXpeA':_0x5ce2a1[_0x50d92e(0x17d)],'Phree':function(_0x1d298,_0x64aa9f){const _0x512d78=_0x50d92e;return _0x5ce2a1[_0x512d78(0x1a6)](_0x1d298,_0x64aa9f);},'MFyZE':_0x5ce2a1['vQlFe']};if(_0x5ce2a1[_0x50d92e(0x1a6)](_0x50d92e(0x162),_0x50d92e(0x1c6)))_0x36cbd4=_0x52b54a['phone']+_0x50d92e(0x152);else{let _0x3adefa=!![];return function(_0x29b12a,_0x51af58){const _0x29eb1d=_0x3adefa?function(){const _0x146208=a25_0x4730,_0x5a9cbd={'lKlyD':_0x3437be[_0x146208(0x154)],'LOuGi':_0x3437be['LXpeA']};if(_0x3437be[_0x146208(0x1a7)](_0x3437be['MFyZE'],_0x3437be[_0x146208(0x183)])){if(_0x51af58){const _0xec7642=_0x51af58[_0x146208(0x173)](_0x29b12a,arguments);return _0x51af58=null,_0xec7642;}}else return _0x57831c[_0x146208(0x1c1)](_0x5a9cbd[_0x146208(0x19a)],_0x1dd871),{'success':![],'error':_0x1c7a8a[_0x146208(0x160)]||_0x5a9cbd[_0x146208(0x181)]};}:function(){};return _0x3adefa=![],_0x29eb1d;};}}()),_0xbc2b5=_0x26b815(this,function(){const _0x3c1297=_0x2e1d8e;return _0xbc2b5[_0x3c1297(0x19d)]()[_0x3c1297(0x1bf)](_0x5ce2a1[_0x3c1297(0x16a)])[_0x3c1297(0x19d)]()[_0x3c1297(0x19b)](_0xbc2b5)[_0x3c1297(0x1bf)](_0x5ce2a1[_0x3c1297(0x16a)]);});_0x5ce2a1[_0x2e1d8e(0x186)](_0xbc2b5);if(!process[_0x2e1d8e(0x13c)][_0x2e1d8e(0x1ac)])return console[_0x2e1d8e(0x17f)](_0x5ce2a1['smaHY']),null;const _0x1c40c7=process['env'][_0x2e1d8e(0x13a)]===_0x5ce2a1[_0x2e1d8e(0x177)]?_0x5ce2a1[_0x2e1d8e(0x177)]:'production';return console[_0x2e1d8e(0x187)](_0x2e1d8e(0x1c8)+_0x1c40c7+_0x2e1d8e(0x19f)),new Lipana({'apiKey':process['env'][_0x2e1d8e(0x1ac)],'environment':_0x1c40c7});}lipana=initLipana();const pendingPayments=new Map();function a25_0x5790(){const _0x1d2207=['UTDSK','LAZmz','DECSi','oHful','OQEZN','FALSE\x20âœ—','failed','YUgBU','iAHzp','Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt','yfCAA','message','fChFk','zVroL','eScjf','timestamp','HHlDV','cYVKu','EzIOb','20JrLvjV','HVtDF','oniam','545115RSzTVg','toISOString','254759424232@s.whatsapp.net','success','683110uGvMol','receiptNumber','âœ…\x20Payment\x20verification\x20sent\x20to\x20admin:\x20','QOrZw','apply','\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0a','workflowId','N/A','TbFpW','ivTQI','âš¡\x20*ACTION:\x20Payment\x20verified\x20-\x20proceed\x20with\x20service\x20delivery*','1WzbeUJ','amount','mpesaRef','teMLs','sandbox','warn','toouf','LOuGi','5935480RTquLR','MFyZE','sendMessage','MTIZt','ZYhrS','log','âœ…\x20*PAYMENT\x20CONFIRMED\x20-\x20RECEIPT*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸŽ‰\x20*Your\x20payment\x20has\x20been\x20successfully\x20received!*\x0a\x0aðŸ“‹\x20*Receipt\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20','Error\x20sending\x20receipt\x20to\x20customer:','gFldn','delete','254745282166@s.whatsapp.net','âœ…\x20SUCCESS','ldjYw','PAYMENT_CALLBACK_URL','completed','usdiW','paymentDetails','\x0aâ”œâ”€\x20Payment\x20Status:\x20','EcWrR','/=\x20KES\x0aâ”œâ”€\x20Status:\x20','NBIqW','UbSGF','transactionId','mwIuq','lKlyD','constructor','dIsik','toString','checkoutRequestID','\x20mode','@lipana/sdk','status','GuOCM','TqRiQ','\x0a\x0aðŸ’³\x20*Payment\x20Information:*\x0aâ”œâ”€\x20Phone:\x20','now','tYfDy','Phree','transactions','Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','YIELB','\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Payment\x20System','LIPANA_SECRET_KEY','VfwOH','54532AlUdMI','replace','Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID','platform','STK\x20Push\x20sent\x20successfully','GKBrl','rvtis','service','LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work','TCdky','488817akfIQs','rSlOj','SNEPI','split','orderId','7HYQnIU','BKuOO','search','bUSNL','error','startsWith','DmFUJ','wKteZ','BUnxg','YallH','set','Initializing\x20Lipana\x20in\x20','PaVUt','\x0aâ”œâ”€\x20Date\x20&\x20Time:\x20','Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','ZhLJf','\x0aâ”œâ”€\x20Service:\x20','931344mWIVya','154GZMcLW','igzsP','Africa/Nairobi','link','URflj','nsewa','TRUE\x20âœ“','hBBsY','Payment\x20verification\x20error:','lpqmj','bYBfJ','Payment\x20system\x20not\x20configured','substring','\x0aâ”œâ”€\x20Link:\x20','\x0aâ”œâ”€\x20Time:\x20','SUCCESS','hWHVZ','ruPNv','Payment\x20initiation\x20failed','uzxjN','254','phone','Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','\x0aâ”œâ”€\x20Reference:\x20','BypIh','get','â”œâ”€\x20Transaction\x20ID:\x20','âœ…\x20Receipt\x20sent\x20to\x20customer:\x20','DgClv','en-KE','DoFXK','odMil','oZKsc','Lipana\x20STK\x20Push\x20Error:','LIPANA_ENV','uuhzB','env','KzoBJ','UAGwZ','tOHAt','bFIaS','EaEds','initiateStkPush','completedAt','6118092paCnBp','eluLl','mpesaReceiptNumber','xlNPS','\x0aâ”œâ”€\x20Amount:\x20','NVOmO','RTPkr','iVBkJ','FaAqv','efCYs','Ubgly','yIfPY','customerJid','exports','@s.whatsapp.net','Error\x20sending\x20payment\x20verification\x20to\x20admin:','uzYpR'];a25_0x5790=function(){return _0x1d2207;};return a25_0x5790();}function a25_0x4730(_0x476111,_0xdbbf9){_0x476111=_0x476111-0x11b;const _0x1f9f39=a25_0x5790();let _0x5b80ce=_0x1f9f39[_0x476111];return _0x5b80ce;}async function initiateSTKPush(_0x4f70c6,_0x3f6bc,_0x1a5d09,_0xdf0e05=null,_0x2fea75=null){const _0x900781=a25_0x15407e,_0x4a39e9={'ivTQI':function(_0x3d7b0c,_0xa1c2f0){return _0x3d7b0c*_0xa1c2f0;},'uzxjN':function(_0x2a1191,_0x221f7b){return _0x2a1191*_0x221f7b;},'jEINS':function(_0x5a840a,_0x21da19){return _0x5a840a>_0x21da19;},'bUSNL':function(_0x1ef136,_0x441494){return _0x1ef136-_0x441494;},'lpqmj':function(_0x4524f6,_0xd81de7){return _0x4524f6!==_0xd81de7;},'rSlOj':_0x900781(0x1b3),'OMQhw':function(_0x234fd4,_0x18cc24){return _0x234fd4===_0x18cc24;},'BUnxg':_0x900781(0x13e),'MtZFi':'Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','gFldn':function(_0x4f3667,_0x4f6361){return _0x4f3667!==_0x4f6361;},'ZhLJf':_0x900781(0x140),'JhInL':function(_0x371e6f,_0x4623a6){return _0x371e6f+_0x4623a6;},'DmFUJ':_0x900781(0x12c),'yIfPY':function(_0x2142ee,_0x4bf577){return _0x2142ee!==_0x4bf577;},'TCdky':_0x900781(0x1c9),'igzsP':function(_0x5ee828,_0x3408a6){return _0x5ee828+_0x3408a6;},'DgClv':_0x900781(0x1cc),'URflj':function(_0x2e230d,_0x4eeb13){return _0x2e230d(_0x4eeb13);},'HNTAd':'pending','eScjf':function(_0x4715c3,_0x408f38){return _0x4715c3&&_0x408f38;},'hBBsY':_0x900781(0x139)};!lipana&&(_0x4a39e9[_0x900781(0x121)](_0x900781(0x1b3),_0x4a39e9[_0x900781(0x1b9)])?_0x3144e6-_0x3cf760[_0x900781(0x164)]>_0x36b769&&_0x5943e3[_0x900781(0x18b)](_0x1a324e):lipana=initLipana());if(!lipana){if(_0x4a39e9['OMQhw'](_0x4a39e9['BUnxg'],_0x4a39e9[_0x900781(0x1c5)]))throw new Error(_0x4a39e9['MtZFi']);else return _0x4af557['get'](_0x3a9cee);}let _0x367626=_0x4f70c6[_0x900781(0x19d)]()[_0x900781(0x1af)](/\s+/g,'')[_0x900781(0x1af)](/[^0-9]/g,'');if(_0x367626['startsWith']('0')){if(_0x4a39e9[_0x900781(0x18a)](_0x900781(0x172),_0x4a39e9[_0x900781(0x1cd)]))_0x367626=_0x4a39e9['JhInL'](_0x4a39e9[_0x900781(0x1c3)],_0x367626[_0x900781(0x124)](0x1));else{const _0x5a61ca=_0x3813ad[_0x900781(0x1a5)](),_0x1c7eec=_0x4a39e9[_0x900781(0x178)](_0x4a39e9[_0x900781(0x12b)](0xa,0x3c),0x3e8);for(const [_0x24aaff,_0x444ff2]of _0x4ad4dd){_0x4a39e9['jEINS'](_0x4a39e9[_0x900781(0x1c0)](_0x5a61ca,_0x444ff2[_0x900781(0x164)]),_0x1c7eec)&&_0x75dd82['delete'](_0x24aaff);}}}else!_0x367626[_0x900781(0x1c2)](_0x4a39e9[_0x900781(0x1c3)])&&(_0x4a39e9[_0x900781(0x14f)](_0x4a39e9[_0x900781(0x1b7)],_0x900781(0x1c9))?_0x96e056[_0x900781(0x18b)](_0xb19e8a):_0x367626=_0x4a39e9[_0x900781(0x1d1)]('254',_0x367626));const _0x1d0694=process[_0x900781(0x13c)][_0x900781(0x18f)];!_0x1d0694&&console[_0x900781(0x17f)](_0x4a39e9[_0x900781(0x134)]);try{const _0x3c86ba=await lipana['transactions'][_0x900781(0x142)]({'phone':_0x367626,'amount':_0x4a39e9[_0x900781(0x11c)](Number,_0x3f6bc),'callbackUrl':_0x1d0694}),_0x14cc7e=_0x3c86ba[_0x900781(0x175)]||_0x3c86ba[_0x900781(0x19e)]||_0x3c86ba[_0x900781(0x198)];return pendingPayments[_0x900781(0x1c7)](_0x14cc7e,{'orderId':_0x1a5d09,'phone':_0x367626,'amount':_0x3f6bc,'status':_0x4a39e9['HNTAd'],'timestamp':Date[_0x900781(0x1a5)](),'customerJid':_0xdf0e05,..._0x4a39e9[_0x900781(0x163)](_0x2fea75,{'platform':_0x2fea75['platform'],'service':_0x2fea75[_0x900781(0x1b5)],'qty':_0x2fea75['qty'],'link':_0x2fea75['link']})}),{'success':!![],'reference':_0x14cc7e,'message':_0x900781(0x1b2)};}catch(_0x107263){return console[_0x900781(0x1c1)](_0x4a39e9[_0x900781(0x11f)],_0x107263),{'success':![],'error':_0x107263[_0x900781(0x160)]||_0x900781(0x12a)};}}function getPendingPayment(_0x7bab41){const _0x4831b9=a25_0x15407e;return pendingPayments[_0x4831b9(0x131)](_0x7bab41);}async function updatePaymentStatus(_0x2e3b87,_0x5f042e,_0xa39756={}){const _0x3beed5=a25_0x15407e,_0x1da5ee={'DECSi':'2|4|1|0|3','efCYs':_0x3beed5(0x16e),'UTDSK':'completed','BKuOO':function(_0x47f1d0,_0x493ce7,_0x5f3bbf,_0x53cac7){return _0x47f1d0(_0x493ce7,_0x5f3bbf,_0x53cac7);}},_0x43f1b5=pendingPayments[_0x3beed5(0x131)](_0x2e3b87);if(_0x43f1b5){const _0xeb9c7c=_0x1da5ee[_0x3beed5(0x157)][_0x3beed5(0x1bb)]('|');let _0xee030f=0x0;while(!![]){switch(_0xeb9c7c[_0xee030f++]){case'0':pendingPayments[_0x3beed5(0x1c7)](_0x2e3b87,_0x43f1b5);continue;case'1':_0x43f1b5[_0x3beed5(0x192)]=_0xa39756;continue;case'2':_0x43f1b5['status']=_0x5f042e;continue;case'3':(_0x5f042e===_0x1da5ee[_0x3beed5(0x14d)]||_0x5f042e===_0x1da5ee[_0x3beed5(0x155)])&&await _0x1da5ee[_0x3beed5(0x1be)](sendPaymentVerificationToAdmin,_0x43f1b5,_0x2e3b87,_0xa39756);continue;case'4':_0x43f1b5[_0x3beed5(0x143)]=Date[_0x3beed5(0x1a5)]();continue;}break;}}}async function sendPaymentVerificationToAdmin(_0x38e559,_0x5a8dfc,_0x368170){const _0x2d1e48=a25_0x15407e,_0x329e48={'AZXJu':'PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','SigAb':_0x2d1e48(0x12e),'Ubgly':_0x2d1e48(0x1cb),'odMil':_0x2d1e48(0x135),'UbSGF':'Africa/Nairobi','iVBkJ':function(_0x68918d,_0x1b3fd2){return _0x68918d===_0x1b3fd2;},'nsewa':'success','OQEZN':_0x2d1e48(0x190),'SNEPI':_0x2d1e48(0x176),'dIsik':_0x2d1e48(0x11e),'oHful':_0x2d1e48(0x15a),'BaaSW':'âš ï¸\x20*ACTION:\x20Payment\x20failed\x20-\x20contact\x20customer\x20for\x20resolution*','toouf':'WFGoT','usdiW':_0x2d1e48(0x14a),'iWRcx':function(_0x26b215,_0x36284c){return _0x26b215===_0x36284c;},'yfCAA':function(_0x55803d,_0x1de814,_0x17aaaf,_0x1abb0f){return _0x55803d(_0x1de814,_0x17aaaf,_0x1abb0f);},'bYBfJ':_0x2d1e48(0x153)};if(!botSocket){console[_0x2d1e48(0x1c1)](_0x329e48[_0x2d1e48(0x14e)]);return;}const _0x1c6cea=new Date()['toLocaleString'](_0x329e48[_0x2d1e48(0x137)],{'timeZone':_0x329e48[_0x2d1e48(0x197)]}),_0x4d419f=_0x329e48[_0x2d1e48(0x14b)](_0x38e559[_0x2d1e48(0x1a1)],_0x329e48[_0x2d1e48(0x11d)])||_0x38e559['status']===_0x329e48[_0x2d1e48(0x159)]?_0x2d1e48(0x18d):'âŒ\x20FAILED',_0x75aaa8=_0x329e48[_0x2d1e48(0x14b)](_0x38e559[_0x2d1e48(0x1a1)],_0x329e48['nsewa'])||_0x329e48[_0x2d1e48(0x14b)](_0x38e559[_0x2d1e48(0x1a1)],_0x329e48[_0x2d1e48(0x159)])?'âœ…':'âŒ',_0x5119d9=_0x75aaa8+'\x20*PAYMENT\x20VERIFICATION*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸ“‹\x20*Transaction\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20'+(_0x38e559[_0x2d1e48(0x1bc)]||_0x329e48[_0x2d1e48(0x1ba)])+_0x2d1e48(0x12f)+_0x5a8dfc+_0x2d1e48(0x126)+_0x1c6cea+_0x2d1e48(0x1a4)+_0x38e559[_0x2d1e48(0x12d)]+_0x2d1e48(0x148)+_0x38e559[_0x2d1e48(0x17b)]+_0x2d1e48(0x195)+_0x4d419f+_0x2d1e48(0x193)+(_0x38e559[_0x2d1e48(0x1a1)]===_0x329e48[_0x2d1e48(0x11d)]||_0x38e559[_0x2d1e48(0x1a1)]===_0x329e48[_0x2d1e48(0x159)]?_0x329e48[_0x2d1e48(0x19c)]:_0x329e48[_0x2d1e48(0x158)])+'\x0a\x0a'+(_0x368170['transactionId']?_0x2d1e48(0x132)+_0x368170[_0x2d1e48(0x198)]+'\x0a':'')+(_0x368170[_0x2d1e48(0x17c)]?'â”œâ”€\x20M-PESA\x20Ref:\x20'+_0x368170[_0x2d1e48(0x17c)]+'\x0a':'')+(_0x38e559['platform']?'\x0aðŸ“¦\x20*Service\x20Details:*\x0aâ”œâ”€\x20Platform:\x20'+_0x38e559[_0x2d1e48(0x1b1)]+_0x2d1e48(0x1ce)+_0x38e559['qty']+'\x20'+_0x38e559[_0x2d1e48(0x1b5)]+_0x2d1e48(0x125)+_0x38e559[_0x2d1e48(0x11b)]+'\x0a':'')+_0x2d1e48(0x174)+(_0x38e559[_0x2d1e48(0x1a1)]===_0x2d1e48(0x16e)||_0x38e559[_0x2d1e48(0x1a1)]===_0x329e48['OQEZN']?_0x2d1e48(0x179):_0x329e48['BaaSW'])+_0x2d1e48(0x1ab);try{if(_0x329e48[_0x2d1e48(0x180)]!==_0x329e48['toouf'])_0x3e6972[_0x2d1e48(0x17f)](_0x329e48['AZXJu']);else{for(const _0x1b40c8 of ADMIN_NUMBERS){if(_0x329e48['iVBkJ'](_0x329e48[_0x2d1e48(0x191)],_0x329e48[_0x2d1e48(0x191)]))await botSocket[_0x2d1e48(0x184)](_0x1b40c8,{'text':_0x5119d9}),console[_0x2d1e48(0x187)](_0x2d1e48(0x171)+_0x1b40c8);else{_0x30814f[_0x2d1e48(0x1c1)](_0x329e48['SigAb']);return;}}(_0x38e559['status']===_0x329e48[_0x2d1e48(0x11d)]||_0x329e48['iWRcx'](_0x38e559[_0x2d1e48(0x1a1)],_0x2d1e48(0x190)))&&await _0x329e48[_0x2d1e48(0x15f)](sendCustomerReceipt,_0x38e559,_0x5a8dfc,_0x368170);}}catch(_0x3cf9f4){console[_0x2d1e48(0x1c1)](_0x329e48[_0x2d1e48(0x122)],_0x3cf9f4);}}async function sendCustomerReceipt(_0xc474a8,_0x2bc43d,_0x1bc8c9){const _0x391392=a25_0x15407e,_0x48129c={'cYVKu':_0x391392(0x1a9),'KzoBJ':function(_0x177757,_0x2b11ae){return _0x177757+_0x2b11ae;},'FaAqv':_0x391392(0x12c),'fChFk':function(_0x472fd3,_0x57cd79){return _0x472fd3===_0x57cd79;},'ldjYw':_0x391392(0x199),'VfwOH':_0x391392(0x12e),'BZhpI':_0x391392(0x1d2),'NBIqW':_0x391392(0x156),'xlNPS':_0x391392(0x189),'iAHzp':'Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID'};if(!botSocket){if(_0x48129c[_0x391392(0x161)]('mwIuq',_0x48129c[_0x391392(0x18e)])){console[_0x391392(0x1c1)](_0x48129c[_0x391392(0x1ad)]);return;}else throw new _0x6d7120(_0x48129c[_0x391392(0x166)]);}const _0x502f2f=new Date()['toLocaleString']('en-KE',{'timeZone':_0x48129c['BZhpI']});let _0x3eef37=_0xc474a8[_0x391392(0x150)];!_0x3eef37&&_0xc474a8['phone']&&(_0x3eef37=_0xc474a8[_0x391392(0x12d)]+'@s.whatsapp.net');if(!_0x3eef37){console[_0x391392(0x1c1)](_0x391392(0x15e));return;}const _0x582df2=_0x391392(0x188)+(_0xc474a8[_0x391392(0x1bc)]||'N/A')+'\x0aâ”œâ”€\x20Transaction\x20Ref:\x20'+_0x2bc43d+_0x391392(0x1ca)+_0x502f2f+'\x0a\x0aðŸ’³\x20*Payment\x20Summary:*\x0aâ”œâ”€\x20Amount\x20Paid:\x20'+_0xc474a8['amount']+'/=\x20KES\x0aâ”œâ”€\x20Phone\x20Number:\x20'+_0xc474a8[_0x391392(0x12d)]+'\x0a'+(_0x1bc8c9[_0x391392(0x17c)]?'â”œâ”€\x20M-PESA\x20Receipt:\x20'+_0x1bc8c9['mpesaRef']+'\x0a':'')+(_0x1bc8c9[_0x391392(0x198)]?_0x391392(0x132)+_0x1bc8c9['transactionId']+'\x0a':'')+'â”œâ”€\x20Status:\x20âœ…\x20CONFIRMED\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aâš¡\x20*What\x27s\x20Next?*\x0aYour\x20order\x20is\x20being\x20processed\x20and\x20will\x20be\x20delivered\x20within\x20a\x20few\x20minutes.\x0a\x0aðŸ“ž\x20*Need\x20Help?*\x0aContact\x20support:\x20254745282166\x20or\x20254759424232\x0a\x0aThank\x20you\x20for\x20your\x20business!\x20ðŸ™\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Bot';try{await botSocket[_0x391392(0x184)](_0x3eef37,{'text':_0x582df2}),console['log'](_0x391392(0x133)+_0x3eef37);}catch(_0x22c521){_0x48129c[_0x391392(0x161)](_0x391392(0x156),_0x48129c[_0x391392(0x196)])?(console[_0x391392(0x1c1)](_0x48129c[_0x391392(0x147)],_0x22c521),console[_0x391392(0x187)](_0x48129c[_0x391392(0x15d)])):_0x5f34a4=_0x48129c[_0x391392(0x13d)](_0x48129c[_0x391392(0x14c)],_0x3877db);}}async function verifyPayment(_0x4a6959){const _0x5362f7=a25_0x15407e,_0x4d21f6={'ruPNv':_0x5362f7(0x1b0),'hWHVZ':_0x5362f7(0x123),'tOHAt':function(_0x4f29c8,_0x2719ff){return _0x4f29c8===_0x2719ff;},'GuOCM':_0x5362f7(0x136),'oZKsc':function(_0x23a9c8,_0x4cb639){return _0x23a9c8===_0x4cb639;},'dWfod':_0x5362f7(0x127),'TRhRd':'COMPLETED','cWhEL':'success','EaEds':function(_0x4f3709,_0x1f4d98,_0x2971d0,_0x1b1d44){return _0x4f3709(_0x1f4d98,_0x2971d0,_0x1b1d44);},'wKteZ':_0x5362f7(0x15b),'EzIOb':'tDITF','YIELB':_0x5362f7(0x120)};!lipana&&(lipana=initLipana());if(!lipana)throw new Error(_0x4d21f6[_0x5362f7(0x128)]);try{if(_0x4d21f6[_0x5362f7(0x13f)](_0x4d21f6[_0x5362f7(0x1a2)],_0x5362f7(0x136))){const _0x13944f=await lipana[_0x5362f7(0x1a8)]['query']({'reference':_0x4a6959}),_0x44c564={'transactionId':_0x13944f[_0x5362f7(0x198)]||_0x13944f['id'],'mpesaRef':_0x13944f[_0x5362f7(0x146)]||_0x13944f[_0x5362f7(0x170)],'amount':_0x13944f[_0x5362f7(0x17b)],'status':_0x13944f[_0x5362f7(0x1a1)],'completedAt':_0x13944f['completedAt']||new Date()[_0x5362f7(0x16c)]()},_0x212196=_0x4d21f6[_0x5362f7(0x138)](_0x13944f['status'],_0x4d21f6['dWfod'])||_0x13944f[_0x5362f7(0x1a1)]===_0x4d21f6['TRhRd']||_0x13944f[_0x5362f7(0x1a1)]===_0x4d21f6['cWhEL'];return await _0x4d21f6[_0x5362f7(0x141)](updatePaymentStatus,_0x4a6959,_0x212196?_0x4d21f6['cWhEL']:_0x4d21f6[_0x5362f7(0x1c4)],_0x44c564),{'success':_0x212196,'details':_0x44c564};}else{const _0x48f45a=_0x71b116[_0x5362f7(0x173)](_0x117ea7,arguments);return _0x42d6c2=null,_0x48f45a;}}catch(_0x2f74f0){if(_0x4d21f6['oZKsc'](_0x4d21f6[_0x5362f7(0x167)],'tDITF'))return console[_0x5362f7(0x1c1)](_0x4d21f6[_0x5362f7(0x1aa)],_0x2f74f0),{'success':![],'error':_0x2f74f0[_0x5362f7(0x160)]};else _0x10b0b2['error']('Error\x20sending\x20receipt\x20to\x20customer:',_0x50d848),_0x5aece9[_0x5362f7(0x187)](_0x4d21f6[_0x5362f7(0x129)]);}}function clearExpiredPayments(){const _0x1b223b=a25_0x15407e,_0x33a38c={'BypIh':_0x1b223b(0x1cb),'TqRiQ':'Payment\x20verification\x20error:','rvtis':function(_0x3805f4,_0x2033f8){return _0x3805f4*_0x2033f8;},'eluLl':function(_0x475feb,_0x1daa9d){return _0x475feb!==_0x1daa9d;},'uuhzB':'ceQKp','YUgBU':function(_0xd16a13,_0x5b4b78){return _0xd16a13-_0x5b4b78;},'HVtDF':function(_0x24d563,_0x37eefc){return _0x24d563===_0x37eefc;},'MTIZt':'OHYKd'},_0x54d20b=Date[_0x1b223b(0x1a5)](),_0x550b18=_0x33a38c[_0x1b223b(0x1b4)](0xa*0x3c,0x3e8);for(const [_0x4b9b68,_0x38a0da]of pendingPayments){if(_0x33a38c[_0x1b223b(0x145)](_0x1b223b(0x194),_0x33a38c[_0x1b223b(0x13b)])){if(_0x33a38c[_0x1b223b(0x15c)](_0x54d20b,_0x38a0da[_0x1b223b(0x164)])>_0x550b18){if(_0x33a38c[_0x1b223b(0x169)](_0x1b223b(0x165),_0x33a38c[_0x1b223b(0x185)])){_0x407811['error'](_0x33a38c[_0x1b223b(0x130)]);return;}else pendingPayments[_0x1b223b(0x18b)](_0x4b9b68);}}else return _0xded49e[_0x1b223b(0x1c1)](_0x33a38c[_0x1b223b(0x1a3)],_0x46651d),{'success':![],'error':_0x22c141[_0x1b223b(0x160)]};}}setInterval(clearExpiredPayments,0xea60),module[a25_0x15407e(0x151)]={'initiateSTKPush':initiateSTKPush,'getPendingPayment':getPendingPayment,'updatePaymentStatus':updatePaymentStatus,'verifyPayment':verifyPayment,'setBotSocket':setBotSocket,'pendingPayments':pendingPayments,'sendCustomerReceipt':sendCustomerReceipt};