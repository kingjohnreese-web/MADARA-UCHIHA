const a25_0x2490ea=a25_0x147a;(function(_0x3f76a5,_0x4110f1){const _0x5e11fe=a25_0x147a,_0x3631fa=_0x3f76a5();while(!![]){try{const _0x5a1a4f=-parseInt(_0x5e11fe(0x1e1))/0x1+parseInt(_0x5e11fe(0x180))/0x2*(parseInt(_0x5e11fe(0x1b6))/0x3)+parseInt(_0x5e11fe(0x203))/0x4+-parseInt(_0x5e11fe(0x20e))/0x5*(parseInt(_0x5e11fe(0x177))/0x6)+-parseInt(_0x5e11fe(0x169))/0x7*(-parseInt(_0x5e11fe(0x208))/0x8)+parseInt(_0x5e11fe(0x174))/0x9+parseInt(_0x5e11fe(0x20d))/0xa*(parseInt(_0x5e11fe(0x170))/0xb);if(_0x5a1a4f===_0x4110f1)break;else _0x3631fa['push'](_0x3631fa['shift']());}catch(_0x3c12cf){_0x3631fa['push'](_0x3631fa['shift']());}}}(a25_0x1f27,0x3d948));const {Lipana}=require('@lipana/sdk');let lipana=null,botSocket=null;const ADMIN_NUMBERS=[a25_0x2490ea(0x189),a25_0x2490ea(0x181)];function setBotSocket(_0x4c163a){botSocket=_0x4c163a;}function initLipana(){const _0x543baa=a25_0x2490ea,_0xe9ef8d={'GBrMz':function(_0x24ff5f,_0x228483){return _0x24ff5f!==_0x228483;},'GJTZA':'FgXDy','emZGl':'(((.+)+)+)+$','kAIwg':function(_0xb3cef0,_0x27bda5){return _0xb3cef0*_0x27bda5;},'vEdfn':function(_0x13cfd5,_0xcab032){return _0x13cfd5-_0xcab032;},'sgYTl':function(_0x5e0517){return _0x5e0517();},'wdlIX':function(_0x307713,_0x4dbcf8){return _0x307713===_0x4dbcf8;},'tNkdw':_0x543baa(0x1ae),'hAbRV':_0x543baa(0x1ff),'ZhNeX':function(_0x5ebcf6,_0x210a20){return _0x5ebcf6===_0x210a20;},'foECk':_0x543baa(0x1d3),'jocbD':_0x543baa(0x184)},_0x39bd63=(function(){const _0x10ba01=_0x543baa,_0xffdfc9={'aGBcd':'254'};if(_0xe9ef8d[_0x10ba01(0x1ec)](_0x10ba01(0x204),_0xe9ef8d[_0x10ba01(0x1f0)]))_0x1cad91=_0xffdfc9['aGBcd']+_0x22bc48[_0x10ba01(0x209)](0x1);else{let _0x4ab00c=!![];return function(_0x82ce0,_0x2040f1){const _0x297c1a=_0x4ab00c?function(){const _0x3ed0df=a25_0x147a;if(_0x2040f1){const _0xbf03b8=_0x2040f1[_0x3ed0df(0x1e2)](_0x82ce0,arguments);return _0x2040f1=null,_0xbf03b8;}}:function(){};return _0x4ab00c=![],_0x297c1a;};}}()),_0x501ff4=_0x39bd63(this,function(){const _0x358acd=_0x543baa;return _0x501ff4[_0x358acd(0x1d6)]()[_0x358acd(0x1d7)](_0xe9ef8d[_0x358acd(0x19a)])['toString']()[_0x358acd(0x176)](_0x501ff4)[_0x358acd(0x1d7)](_0xe9ef8d['emZGl']);});_0xe9ef8d[_0x543baa(0x1b3)](_0x501ff4);if(!process[_0x543baa(0x1ef)][_0x543baa(0x205)]){if(_0xe9ef8d['wdlIX'](_0x543baa(0x1ae),_0xe9ef8d['tNkdw']))return console[_0x543baa(0x1fc)](_0xe9ef8d[_0x543baa(0x1cd)]),null;else{const _0x121a27=_0x1a7e53['now'](),_0x142194=_0xe9ef8d['kAIwg'](_0xe9ef8d[_0x543baa(0x1d2)](0xa,0x3c),0x3e8);for(const [_0x5a8a67,_0x40a6bf]of _0x52ceb1){_0xe9ef8d[_0x543baa(0x1f8)](_0x121a27,_0x40a6bf[_0x543baa(0x18a)])>_0x142194&&_0x52a42f[_0x543baa(0x1c1)](_0x5a8a67);}}}const _0x16205c=_0xe9ef8d[_0x543baa(0x1e8)](process[_0x543baa(0x1ef)][_0x543baa(0x19f)],'sandbox')?_0xe9ef8d[_0x543baa(0x1ab)]:_0xe9ef8d['jocbD'];return console[_0x543baa(0x1bc)](_0x543baa(0x1c2)+_0x16205c+_0x543baa(0x1a9)),new Lipana({'apiKey':process['env']['LIPANA_SECRET_KEY'],'environment':_0x16205c});}lipana=initLipana();function a25_0x1f27(){const _0x3e682f=['\x0aâ”œâ”€\x20Link:\x20','â”œâ”€\x20Status:\x20âœ…\x20CONFIRMED\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aâš¡\x20*What\x27s\x20Next?*\x0aYour\x20order\x20is\x20being\x20processed\x20and\x20will\x20be\x20delivered\x20within\x20a\x20few\x20minutes.\x0a\x0aðŸ“ž\x20*Need\x20Help?*\x0aContact\x20support:\x20254745282166\x20or\x20254759424232\x0a\x0aThank\x20you\x20for\x20your\x20business!\x20ðŸ™\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Bot','sgYTl','\x0a\x0aðŸ’³\x20*Payment\x20Information:*\x0aâ”œâ”€\x20Phone:\x20','bgiYk','7386fNZmnt','vGwsH','@s.whatsapp.net','Error\x20sending\x20payment\x20verification\x20to\x20admin:','ubbam','NFZeM','log','/=\x20KES\x0aâ”œâ”€\x20Phone\x20Number:\x20','\x0aðŸ“¦\x20*Service\x20Details:*\x0aâ”œâ”€\x20Platform:\x20','\x0aâ”œâ”€\x20Reference:\x20','pQHYK','delete','Initializing\x20Lipana\x20in\x20','brfMb','sendMessage','OUYHC','hYSlj','gfSjz','booDy','Payment\x20verification\x20error:','fuyAO','workflowId','failed','hAbRV','set','VugJF','bgdYJ','âœ…\x20Payment\x20verification\x20sent\x20to\x20admin:\x20','kAIwg','sandbox','\x0aâ”œâ”€\x20Amount:\x20','\x0aâ”œâ”€\x20Date\x20&\x20Time:\x20','toString','search','pending','â”œâ”€\x20M-PESA\x20Ref:\x20','completedAt','âŒ\x20FAILED','now','replace','DgnDI','IrGXD','HgCMx','426426Hpntry','apply','Ybzxw','cxwWv','customerJid','exports','udaCz','ZhNeX','get','PAYMENT_CALLBACK_URL','pCHdW','GBrMz','phone','\x20*PAYMENT\x20VERIFICATION*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸ“‹\x20*Transaction\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20','env','GJTZA','PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','xVeVh','SUCCESS','amount','VoMDp','geAuI','cAjgx','vEdfn','Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','Payment\x20system\x20not\x20configured','mpesaReceiptNumber','warn','âœ…\x20Receipt\x20sent\x20to\x20customer:\x20','initiateStkPush','LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work','MwnEX','\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Payment\x20System','mbnQr','184640WcCcWT','FgXDy','LIPANA_SECRET_KEY','PaNbo','QTvxf','16GMffXu','substring','Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt','BrCOr','mgzZG','869650TxuFvb','1525rIXkwX','bfHkn','success','38507hezSVX','Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','completed','N/A','link','en-KE','error','110UgZFjF','ccKkx','bFRgl','DgRlR','267480EVwOAz','riiPr','constructor','6096iHDNKt','qUsSu','BocLA','\x0aâ”œâ”€\x20Transaction\x20Ref:\x20','qty','AaYnW','ZasgC','hmVlj','mMkmr','26YqJlFI','254759424232@s.whatsapp.net','transactions','FALSE\x20âœ—','production','\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0a','transactionId','/=\x20KES\x0aâ”œâ”€\x20Status:\x20','query','254745282166@s.whatsapp.net','timestamp','TRUE\x20âœ“','fSIcX','VsHYE','dIEEU','Africa/Nairobi','Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','xhYoq','iyoZw','Error\x20sending\x20receipt\x20to\x20customer:','message','254','CRgkd','PLSzS','iFTJy','âœ…\x20SUCCESS','emZGl','âœ…\x20*PAYMENT\x20CONFIRMED\x20-\x20RECEIPT*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸŽ‰\x20*Your\x20payment\x20has\x20been\x20successfully\x20received!*\x0a\x0aðŸ“‹\x20*Receipt\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20','status','\x0aâ”œâ”€\x20Time:\x20','checkoutRequestID','LIPANA_ENV','IOWNw','ZtPHy','COMPLETED','mpesaRef','âš¡\x20*ACTION:\x20Payment\x20verified\x20-\x20proceed\x20with\x20service\x20delivery*','MmNkl','XXkmp','nfmDM','paymentDetails','\x20mode','KPQTg','foECk','platform','OEjwq','jjLtM','\x0aâ”œâ”€\x20Payment\x20Status:\x20','ZYMMi'];a25_0x1f27=function(){return _0x3e682f;};return a25_0x1f27();}const pendingPayments=new Map();async function initiateSTKPush(_0x4703a0,_0x36801e,_0x293e50,_0x26e823=null,_0x44b3a2=null){const _0x292140=a25_0x2490ea,_0x1a4818={'bFRgl':_0x292140(0x190),'KobTZ':'Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','mgzZG':function(_0x2c6a54,_0x3163a9){return _0x2c6a54===_0x3163a9;},'ubbam':'PAonR','VugJF':'ApWom','XxrMR':'bufkZ','XFWLr':function(_0x4d5243,_0x5c3269){return _0x4d5243+_0x5c3269;},'AaYnW':'254','kChUI':_0x292140(0x1f1),'gfSjz':_0x292140(0x20f),'aIhTn':function(_0x2c73a7,_0x5ccde8){return _0x2c73a7(_0x5ccde8);},'ccKkx':_0x292140(0x1d8),'KPQTg':function(_0x58b17c,_0x4a730a){return _0x58b17c&&_0x4a730a;},'hBaEx':'STK\x20Push\x20sent\x20successfully','OUYHC':'Lipana\x20STK\x20Push\x20Error:'};if(!lipana){if(_0x1a4818[_0x292140(0x20c)](_0x1a4818[_0x292140(0x1ba)],_0x1a4818[_0x292140(0x1ba)]))lipana=initLipana();else{_0x24338a[_0x292140(0x16f)](_0x1a4818[_0x292140(0x172)]);return;}}if(!lipana){if(_0x1a4818[_0x292140(0x20c)](_0x1a4818[_0x292140(0x1cf)],_0x1a4818['XxrMR'])){const _0x207247=_0x14d455?function(){const _0x2bef76=_0x292140;if(_0xa969df){const _0x3cac4d=_0x977d1[_0x2bef76(0x1e2)](_0x22f9ed,arguments);return _0x513005=null,_0x3cac4d;}}:function(){};return _0x36a665=![],_0x207247;}else throw new Error(_0x292140(0x16a));}let _0x5ca59b=_0x4703a0[_0x292140(0x1d6)]()['replace'](/\s+/g,'')[_0x292140(0x1dd)](/[^0-9]/g,'');if(_0x5ca59b['startsWith']('0'))_0x5ca59b=_0x1a4818['XFWLr'](_0x1a4818[_0x292140(0x17c)],_0x5ca59b['substring'](0x1));else!_0x5ca59b['startsWith'](_0x1a4818[_0x292140(0x17c)])&&(_0x5ca59b=_0x1a4818[_0x292140(0x17c)]+_0x5ca59b);const _0x1630ca=process[_0x292140(0x1ef)][_0x292140(0x1ea)];!_0x1630ca&&console['warn'](_0x1a4818['kChUI']);try{if(_0x1a4818[_0x292140(0x1c7)]==='bfHkn'){const _0x162129=await lipana['transactions'][_0x292140(0x1fe)]({'phone':_0x5ca59b,'amount':_0x1a4818['aIhTn'](Number,_0x36801e),'callbackUrl':_0x1630ca}),_0x3ca05c=_0x162129[_0x292140(0x1cb)]||_0x162129[_0x292140(0x19e)]||_0x162129['transactionId'];return pendingPayments['set'](_0x3ca05c,{'orderId':_0x293e50,'phone':_0x5ca59b,'amount':_0x36801e,'status':_0x1a4818[_0x292140(0x171)],'timestamp':Date[_0x292140(0x1dc)](),'customerJid':_0x26e823,..._0x1a4818[_0x292140(0x1aa)](_0x44b3a2,{'platform':_0x44b3a2[_0x292140(0x1ac)],'service':_0x44b3a2['service'],'qty':_0x44b3a2[_0x292140(0x17b)],'link':_0x44b3a2['link']})}),{'success':!![],'reference':_0x3ca05c,'message':_0x1a4818['hBaEx']};}else{_0x3c0457[_0x292140(0x16f)](_0x1a4818['KobTZ']);return;}}catch(_0x527039){return console[_0x292140(0x16f)](_0x1a4818[_0x292140(0x1c5)],_0x527039),{'success':![],'error':_0x527039[_0x292140(0x194)]||'Payment\x20initiation\x20failed'};}}function getPendingPayment(_0x575c5b){const _0x1c800c=a25_0x2490ea;return pendingPayments[_0x1c800c(0x1e9)](_0x575c5b);}async function updatePaymentStatus(_0x4c49eb,_0x135c1e,_0x50b5e7={}){const _0x59b8e7=a25_0x2490ea,_0x4e282a={'OEjwq':function(_0x551da9,_0x3f0ba7){return _0x551da9>_0x3f0ba7;},'riiPr':function(_0x1ad164,_0x10a021){return _0x1ad164===_0x10a021;},'udaCz':_0x59b8e7(0x168),'tCuKk':_0x59b8e7(0x16b),'rRgBB':function(_0x2c08a9,_0x4aa745){return _0x2c08a9!==_0x4aa745;},'VsHYE':_0x59b8e7(0x1c6),'cxwWv':function(_0x57d9af,_0x13ba73,_0x504f35,_0x3c38db){return _0x57d9af(_0x13ba73,_0x504f35,_0x3c38db);}},_0x2adeb6=pendingPayments[_0x59b8e7(0x1e9)](_0x4c49eb);_0x2adeb6&&(_0x2adeb6[_0x59b8e7(0x19c)]=_0x135c1e,_0x2adeb6[_0x59b8e7(0x1da)]=Date[_0x59b8e7(0x1dc)](),_0x2adeb6[_0x59b8e7(0x1a8)]=_0x50b5e7,pendingPayments[_0x59b8e7(0x1ce)](_0x4c49eb,_0x2adeb6),(_0x4e282a['riiPr'](_0x135c1e,_0x4e282a[_0x59b8e7(0x1e7)])||_0x4e282a[_0x59b8e7(0x175)](_0x135c1e,_0x4e282a['tCuKk']))&&(_0x4e282a['rRgBB'](_0x4e282a[_0x59b8e7(0x18d)],_0x4e282a[_0x59b8e7(0x18d)])?_0x4e282a[_0x59b8e7(0x1ad)](_0x5ef46f-_0x516398[_0x59b8e7(0x18a)],_0x2b69b9)&&_0x489a1d[_0x59b8e7(0x1c1)](_0x12e205):await _0x4e282a[_0x59b8e7(0x1e4)](sendPaymentVerificationToAdmin,_0x2adeb6,_0x4c49eb,_0x50b5e7)));}async function sendPaymentVerificationToAdmin(_0x3abdbc,_0x25d2a1,_0x3dcf82){const _0x1572ec=a25_0x2490ea,_0x34f37d={'fSIcX':_0x1572ec(0x1f1),'mMkmr':_0x1572ec(0x1f9),'PdZuy':_0x1572ec(0x16e),'XXkmp':function(_0x3e6717,_0x1cd4b9){return _0x3e6717===_0x1cd4b9;},'IOWNw':'success','pQHYK':'completed','eGLoe':_0x1572ec(0x199),'Cnjhz':_0x1572ec(0x1db),'hmVlj':function(_0xb1af1,_0x10c8b6){return _0xb1af1===_0x10c8b6;},'PLSzS':'N/A','HwBMt':function(_0x3c73d8,_0x2e7a4d){return _0x3c73d8===_0x2e7a4d;},'GlyVB':_0x1572ec(0x18b),'lEFee':_0x1572ec(0x183),'brfMb':function(_0xbeb87f,_0x470943){return _0xbeb87f===_0x470943;},'HgCMx':'âš ï¸\x20*ACTION:\x20Payment\x20failed\x20-\x20contact\x20customer\x20for\x20resolution*','xVeVh':function(_0x5585d6,_0x224d21){return _0x5585d6!==_0x224d21;},'fuyAO':_0x1572ec(0x1b5),'nMxwO':function(_0x4ebc61,_0x1d7ede,_0xe3b258,_0x738e91){return _0x4ebc61(_0x1d7ede,_0xe3b258,_0x738e91);},'ZtPHy':'CHSAU','tGzrP':_0x1572ec(0x1b9)};if(!botSocket){console[_0x1572ec(0x16f)](_0x34f37d[_0x1572ec(0x17f)]);return;}const _0x288f52=new Date()['toLocaleString'](_0x34f37d['PdZuy'],{'timeZone':_0x1572ec(0x18f)}),_0x4128f6=_0x34f37d[_0x1572ec(0x1a6)](_0x3abdbc[_0x1572ec(0x19c)],_0x34f37d[_0x1572ec(0x1a0)])||_0x34f37d[_0x1572ec(0x1a6)](_0x3abdbc['status'],_0x34f37d[_0x1572ec(0x1c0)])?_0x34f37d['eGLoe']:_0x34f37d['Cnjhz'],_0xdc712b=_0x3abdbc['status']===_0x34f37d[_0x1572ec(0x1a0)]||_0x34f37d[_0x1572ec(0x17e)](_0x3abdbc[_0x1572ec(0x19c)],_0x1572ec(0x16b))?'âœ…':'âŒ',_0x1d0d55=_0xdc712b+_0x1572ec(0x1ee)+(_0x3abdbc['orderId']||_0x34f37d[_0x1572ec(0x197)])+_0x1572ec(0x1bf)+_0x25d2a1+_0x1572ec(0x19d)+_0x288f52+_0x1572ec(0x1b4)+_0x3abdbc[_0x1572ec(0x1ed)]+_0x1572ec(0x1d4)+_0x3abdbc[_0x1572ec(0x1f4)]+_0x1572ec(0x187)+_0x4128f6+_0x1572ec(0x1af)+(_0x34f37d['XXkmp'](_0x3abdbc[_0x1572ec(0x19c)],_0x34f37d[_0x1572ec(0x1a0)])||_0x34f37d['HwBMt'](_0x3abdbc[_0x1572ec(0x19c)],_0x34f37d[_0x1572ec(0x1c0)])?_0x34f37d['GlyVB']:_0x34f37d['lEFee'])+'\x0a\x0a'+(_0x3dcf82[_0x1572ec(0x186)]?'â”œâ”€\x20Transaction\x20ID:\x20'+_0x3dcf82[_0x1572ec(0x186)]+'\x0a':'')+(_0x3dcf82[_0x1572ec(0x1a3)]?_0x1572ec(0x1d9)+_0x3dcf82[_0x1572ec(0x1a3)]+'\x0a':'')+(_0x3abdbc[_0x1572ec(0x1ac)]?_0x1572ec(0x1be)+_0x3abdbc['platform']+'\x0aâ”œâ”€\x20Service:\x20'+_0x3abdbc[_0x1572ec(0x17b)]+'\x20'+_0x3abdbc['service']+_0x1572ec(0x1b1)+_0x3abdbc[_0x1572ec(0x16d)]+'\x0a':'')+_0x1572ec(0x185)+(_0x34f37d[_0x1572ec(0x1a6)](_0x3abdbc[_0x1572ec(0x19c)],_0x1572ec(0x168))||_0x34f37d[_0x1572ec(0x1c3)](_0x3abdbc['status'],_0x34f37d[_0x1572ec(0x1c0)])?_0x1572ec(0x1a4):_0x34f37d[_0x1572ec(0x1e0)])+_0x1572ec(0x201);try{if(_0x34f37d[_0x1572ec(0x1f2)](_0x34f37d[_0x1572ec(0x1ca)],_0x34f37d[_0x1572ec(0x1ca)]))_0x113d78=_0x1e68aa;else{for(const _0x54ce38 of ADMIN_NUMBERS){await botSocket[_0x1572ec(0x1c4)](_0x54ce38,{'text':_0x1d0d55}),console[_0x1572ec(0x1bc)](_0x1572ec(0x1d1)+_0x54ce38);}(_0x3abdbc[_0x1572ec(0x19c)]===_0x34f37d[_0x1572ec(0x1a0)]||_0x34f37d['XXkmp'](_0x3abdbc[_0x1572ec(0x19c)],_0x34f37d[_0x1572ec(0x1c0)]))&&await _0x34f37d['nMxwO'](sendCustomerReceipt,_0x3abdbc,_0x25d2a1,_0x3dcf82);}}catch(_0x4ea9be){_0x34f37d['ZtPHy']!==_0x34f37d[_0x1572ec(0x1a1)]?_0x564e10[_0x1572ec(0x1fc)](_0x34f37d[_0x1572ec(0x18c)]):console['error'](_0x34f37d['tGzrP'],_0x4ea9be);}}async function sendCustomerReceipt(_0x1b5340,_0x33161d,_0x506dd0){const _0x60f265=a25_0x2490ea,_0x1af838={'bgdYJ':_0x60f265(0x1b9),'BocLA':_0x60f265(0x190),'mbnQr':_0x60f265(0x16e),'PaNbo':_0x60f265(0x18f),'MwnEX':function(_0x20fcca,_0x29c34e){return _0x20fcca!==_0x29c34e;},'MmNkl':_0x60f265(0x1df),'BrCOr':_0x60f265(0x20a),'hYwjR':_0x60f265(0x16c),'DgRlR':_0x60f265(0x17d)};if(!botSocket){console['error'](_0x1af838[_0x60f265(0x179)]);return;}const _0x57cae8=new Date()['toLocaleString'](_0x1af838[_0x60f265(0x202)],{'timeZone':_0x1af838[_0x60f265(0x206)]});let _0x481c54=_0x1b5340[_0x60f265(0x1e5)];!_0x481c54&&_0x1b5340[_0x60f265(0x1ed)]&&(_0x1af838[_0x60f265(0x200)](_0x60f265(0x1c8),_0x1af838[_0x60f265(0x1a5)])?_0x481c54=_0x1b5340[_0x60f265(0x1ed)]+'@s.whatsapp.net':_0x169d6b=_0x41e333[_0x60f265(0x1ed)]+_0x60f265(0x1b8));if(!_0x481c54){console[_0x60f265(0x16f)](_0x1af838[_0x60f265(0x20b)]);return;}const _0x8a33e5=_0x60f265(0x19b)+(_0x1b5340['orderId']||_0x1af838['hYwjR'])+_0x60f265(0x17a)+_0x33161d+_0x60f265(0x1d5)+_0x57cae8+'\x0a\x0aðŸ’³\x20*Payment\x20Summary:*\x0aâ”œâ”€\x20Amount\x20Paid:\x20'+_0x1b5340[_0x60f265(0x1f4)]+_0x60f265(0x1bd)+_0x1b5340[_0x60f265(0x1ed)]+'\x0a'+(_0x506dd0[_0x60f265(0x1a3)]?'â”œâ”€\x20M-PESA\x20Receipt:\x20'+_0x506dd0[_0x60f265(0x1a3)]+'\x0a':'')+(_0x506dd0['transactionId']?'â”œâ”€\x20Transaction\x20ID:\x20'+_0x506dd0['transactionId']+'\x0a':'')+_0x60f265(0x1b2);try{await botSocket[_0x60f265(0x1c4)](_0x481c54,{'text':_0x8a33e5}),console['log'](_0x60f265(0x1fd)+_0x481c54);}catch(_0x3c82c4){_0x1af838[_0x60f265(0x200)](_0x1af838['DgRlR'],_0x1af838[_0x60f265(0x173)])?_0x59126f[_0x60f265(0x16f)](_0x1af838[_0x60f265(0x1d0)],_0x4f50e9):(console['error'](_0x60f265(0x193),_0x3c82c4),console[_0x60f265(0x1bc)]('Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID'));}}async function verifyPayment(_0x419a40){const _0x13c161=a25_0x2490ea,_0x5ad322={'cAjgx':function(_0xccb648,_0x3c9aab){return _0xccb648!==_0x3c9aab;},'ZYMMi':_0x13c161(0x1bb),'IwSrA':_0x13c161(0x1e3),'DhLjq':function(_0x3d38ac){return _0x3d38ac();},'DgnDI':_0x13c161(0x207),'geAuI':function(_0x1f8cbd,_0x364853){return _0x1f8cbd===_0x364853;},'yNldS':function(_0xd3321d,_0x50097f){return _0xd3321d===_0x50097f;},'dIEEU':_0x13c161(0x168),'mjLas':function(_0x262332,_0x2e12c9,_0x3590be,_0x362f95){return _0x262332(_0x2e12c9,_0x3590be,_0x362f95);},'CRgkd':_0x13c161(0x1cc),'LwHuH':_0x13c161(0x1c9)};if(!lipana){if(_0x5ad322[_0x13c161(0x1f7)](_0x5ad322[_0x13c161(0x1b0)],_0x5ad322['IwSrA']))lipana=_0x5ad322['DhLjq'](initLipana);else return _0xb023e[_0x13c161(0x1e9)](_0x251ba4);}if(!lipana){if(_0x5ad322['cAjgx'](_0x5ad322[_0x13c161(0x1de)],_0x5ad322['DgnDI']))_0x28ac62=_0x23ac11();else throw new Error(_0x13c161(0x1fa));}try{const _0x4a1eca=await lipana[_0x13c161(0x182)][_0x13c161(0x188)]({'reference':_0x419a40}),_0x382b4c={'transactionId':_0x4a1eca[_0x13c161(0x186)]||_0x4a1eca['id'],'mpesaRef':_0x4a1eca[_0x13c161(0x1fb)]||_0x4a1eca['receiptNumber'],'amount':_0x4a1eca['amount'],'status':_0x4a1eca[_0x13c161(0x19c)],'completedAt':_0x4a1eca['completedAt']||new Date()['toISOString']()},_0x22665f=_0x5ad322[_0x13c161(0x1f6)](_0x4a1eca[_0x13c161(0x19c)],_0x13c161(0x1f3))||_0x5ad322['yNldS'](_0x4a1eca[_0x13c161(0x19c)],_0x13c161(0x1a2))||_0x5ad322['geAuI'](_0x4a1eca[_0x13c161(0x19c)],_0x5ad322[_0x13c161(0x18e)]);return await _0x5ad322['mjLas'](updatePaymentStatus,_0x419a40,_0x22665f?_0x5ad322[_0x13c161(0x18e)]:_0x5ad322[_0x13c161(0x196)],_0x382b4c),{'success':_0x22665f,'details':_0x382b4c};}catch(_0x460b19){return console[_0x13c161(0x16f)](_0x5ad322['LwHuH'],_0x460b19),{'success':![],'error':_0x460b19[_0x13c161(0x194)]};}}function a25_0x147a(_0x5b4bef,_0x2d2228){_0x5b4bef=_0x5b4bef-0x168;const _0x2b799f=a25_0x1f27();let _0x55bbe4=_0x2b799f[_0x5b4bef];return _0x55bbe4;}function clearExpiredPayments(){const _0x201e94=a25_0x2490ea,_0x198026={'vGwsH':function(_0x17c71c,_0x41e175){return _0x17c71c+_0x41e175;},'VoMDp':_0x201e94(0x195),'iyoZw':function(_0x1546ac,_0x84136f){return _0x1546ac*_0x84136f;},'qUsSu':function(_0x11305b,_0x32925e){return _0x11305b!==_0x32925e;},'xhYoq':_0x201e94(0x198),'nfmDM':function(_0x3e2fc3,_0x2c6241){return _0x3e2fc3>_0x2c6241;},'pCHdW':function(_0x29b17e,_0x5aa813){return _0x29b17e-_0x5aa813;}},_0x5e5c53=Date[_0x201e94(0x1dc)](),_0x3809bf=_0x198026[_0x201e94(0x192)](0xa,0x3c)*0x3e8;for(const [_0x17ddd1,_0x5d0407]of pendingPayments){_0x198026[_0x201e94(0x178)](_0x198026[_0x201e94(0x191)],'QoGCR')?_0x198026[_0x201e94(0x1a7)](_0x198026[_0x201e94(0x1eb)](_0x5e5c53,_0x5d0407[_0x201e94(0x18a)]),_0x3809bf)&&pendingPayments[_0x201e94(0x1c1)](_0x17ddd1):_0x4a11de=_0x198026[_0x201e94(0x1b7)](_0x198026[_0x201e94(0x1f5)],_0x2df79c);}}setInterval(clearExpiredPayments,0xea60),module[a25_0x2490ea(0x1e6)]={'initiateSTKPush':initiateSTKPush,'getPendingPayment':getPendingPayment,'updatePaymentStatus':updatePaymentStatus,'verifyPayment':verifyPayment,'setBotSocket':setBotSocket,'pendingPayments':pendingPayments,'sendCustomerReceipt':sendCustomerReceipt};